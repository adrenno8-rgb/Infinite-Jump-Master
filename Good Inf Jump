local UserInputService = game:GetService("UserInputService")
local player = game.Players.LocalPlayer
local humanoid
local infJump = false
local boost = false
local toggleBtn, boostBtn, closeBtn
local defaultJP, boostedJP = 50, 180
local jumpCooldown, lastJump = 0.29, 0

local function setupChar(char)
	humanoid = char:WaitForChild("Humanoid",10)
end

player.CharacterAdded:Connect(setupChar)
if player.Character then setupChar(player.Character) end

UserInputService.JumpRequest:Connect(function()
	if infJump and humanoid and (tick()-lastJump)>=jumpCooldown then
		if humanoid:GetState() ~= Enum.HumanoidStateType.Jumping then
			humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
			humanoid.Jump = true
			lastJump = tick()
		end
	end
end)

UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode==Enum.KeyCode.U then
		infJump = not infJump
		if toggleBtn then toggleBtn.Text = infJump and "Inf Jump: ON" or "Inf Jump: OFF" end
	elseif input.KeyCode==Enum.KeyCode.Q then
		boost = not boost
		if humanoid then humanoid.JumpPower = boost and boostedJP or defaultJP end
		if boostBtn then boostBtn.Text = boost and "JP Boost: ON" or "JP Boost: OFF" end
	end
end)

local function createMenu()
	local gui = Instance.new("ScreenGui",player:WaitForChild("PlayerGui"))
	gui.Name = "InfiniteBoostMenu"

	local menu = Instance.new("Frame",gui)
	menu.Size, menu.Position = UDim2.new(0,150,0,75), UDim2.new(0.5,-75,0.5,-50)
	menu.BackgroundColor3, menu.BackgroundTransparency = Color3.fromRGB(255,255,0),0.2

	local title = Instance.new("TextLabel",menu)
	title.Size, title.Position = UDim2.new(1,0,0,20), UDim2.new(0,0,0,0)
	title.Text, title.TextColor3, title.TextScaled, title.Font, title.BackgroundTransparency = "Infinite Boost", Color3.new(0,0,0), true, Enum.Font.SourceSansBold, 1

	toggleBtn = Instance.new("TextButton",menu)
	toggleBtn.Size, toggleBtn.Position = UDim2.new(0,130,0,20), UDim2.new(0,10,0,25)
	toggleBtn.Text, toggleBtn.TextColor3, toggleBtn.BackgroundColor3, toggleBtn.Font, toggleBtn.TextSize = "Inf Jump: OFF", Color3.new(1,1,1), Color3.fromRGB(144,238,144), Enum.Font.Gotham, 14
	toggleBtn.MouseButton1Click:Connect(function()
		infJump = not infJump
		toggleBtn.Text = infJump and "Inf Jump: ON" or "Inf Jump: OFF"
	end)

	boostBtn = Instance.new("TextButton",menu)
	boostBtn.Size, boostBtn.Position = UDim2.new(0,130,0,20), UDim2.new(0,10,0,50)
	boostBtn.Text, boostBtn.TextColor3, boostBtn.BackgroundColor3, boostBtn.Font, boostBtn.TextSize = "JP Boost: OFF", Color3.new(1,1,1), Color3.fromRGB(173,216,230), Enum.Font.Gotham, 14
	boostBtn.MouseButton1Click:Connect(function()
		boost = not boost
		if humanoid then humanoid.JumpPower = boost and boostedJP or defaultJP end
		boostBtn.Text = boost and "JP Boost: ON" or "JP Boost: OFF"
	end)

	local creditsBG = Instance.new("Frame",menu)
	creditsBG.Size, creditsBG.Position = UDim2.new(0,150,0,20), UDim2.new(0,0,1,0)
	creditsBG.BackgroundColor3, creditsBG.BackgroundTransparency = Color3.fromRGB(0,255,0),0.3
	local creditsLabel = Instance.new("TextLabel",creditsBG)
	creditsLabel.Size, creditsLabel.Position = UDim2.new(1,0,1,0), UDim2.new(0,0,0,0)
	creditsLabel.Text, creditsLabel.TextColor3, creditsLabel.TextScaled, creditsLabel.Font, creditsLabel.BackgroundTransparency = "Inf Jump = U | JP Boost = Q Creds to lightdesire on dc", Color3.new(0,0,0), true, Enum.Font.SourceSans, 1

	closeBtn = Instance.new("TextButton",menu)
	closeBtn.Size, closeBtn.Position = UDim2.new(0,12,0,12), UDim2.new(1,-15,0,-15)
	closeBtn.Text, closeBtn.TextColor3, closeBtn.BackgroundColor3, closeBtn.Font, closeBtn.TextSize = "X", Color3.new(1,1,1), Color3.fromRGB(255,0,0), Enum.Font.GothamBold, 10
	closeBtn.MouseButton1Click:Connect(function() gui:Destroy() end)

	local minBtn = Instance.new("TextButton",menu)
	minBtn.Size, minBtn.Position = UDim2.new(0,12,0,12), UDim2.new(1,-30,0,-15)
	minBtn.Text, minBtn.TextColor3, minBtn.BackgroundColor3, minBtn.Font, minBtn.TextSize = "-", Color3.new(0,0,0), Color3.fromRGB(255,255,0), Enum.Font.GothamBold, 10

	local openBtn = Instance.new("TextButton",gui)
	openBtn.Size, openBtn.Position, openBtn.Text, openBtn.BackgroundColor3, openBtn.TextColor3, openBtn.Font, openBtn.TextSize, openBtn.Visible = UDim2.new(0,20,0,20), UDim2.new(0.5,-10,0.5,-10), "+", Color3.fromRGB(255,255,0), Color3.new(0,0,0), Enum.Font.GothamBold, 14, false

	minBtn.MouseButton1Click:Connect(function()
		menu.Visible = false
		openBtn.Visible = true
	end)

	openBtn.MouseButton1Click:Connect(function()
		menu.Visible = true
		openBtn.Visible = false
	end)

	local drag, dragStart, startPos
	menu.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
			drag = true
			dragStart = i.Position
			startPos = menu.Position
		end
	end)
	menu.InputChanged:Connect(function(i)
		if drag and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch) then
			local delta = i.Position - dragStart
			menu.Position = UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y)
		end
	end)
	menu.InputEnded:Connect(function(i)
		if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then drag=false end
	end)

	local dragBall, ballStart, ballPos
	openBtn.InputBegan:Connect(function(i)
		if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
			dragBall=true
			ballStart=i.Position
			ballPos=openBtn.Position
		end
	end)
	openBtn.InputChanged:Connect(function(i)
		if dragBall and (i.UserInputType==Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch) then
			local delta=i.Position-ballStart
			openBtn.Position=UDim2.new(ballPos.X.Scale,ballPos.X.Offset+delta.X,ballPos.Y.Scale,ballPos.Y.Offset+delta.Y)
		end
	end)
	openBtn.InputEnded:Connect(function(i)
		if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then dragBall=false end
	end)

	return gui
end

createMenu()

player.CharacterAdded:Connect(function()
	local gui=player.PlayerGui:FindFirstChild("InfiniteBoostMenu")
	if gui then gui:Destroy() end
	createMenu()
end)

